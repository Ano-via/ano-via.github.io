<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Email Viewer</title>
    <script>
        async function getEmails() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const imap = document.getElementById('imap').value;
            const ssl = document.getElementById('ssl').checked;

            // 发送请求到后端
            const response = await fetch('/get-emails', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ email, password, imap, ssl })
            });

            const emails = await response.json();

            // 将获取的邮件内容显示在表格中
            const emailTable = document.getElementById('emailTable');
            emailTable.innerHTML = ''; // 清空表格内容

            emails.forEach(email => {
                const row = `<tr>
                                <td>${email.title}</td>
                                <td>${email.content}</td>
                                <td>${email.time}</td>
                            </tr>`;
                emailTable.innerHTML += row;
            });
        }
    </script>
</head>
<body>
    <h1>Email Viewer</h1>
    <label for="email">Email:</label>
    <input type="email" id="email" placeholder="Enter your email"><br><br>

    <label for="password">Password:</label>
    <input type="password" id="password" placeholder="Enter your password"><br><br>

    <label for="imap">IMAP Server:</label>
    <input type="text" id="imap" placeholder="Enter IMAP server"><br><br>

    <label for="ssl">SSL:</label>
    <input type="checkbox" id="ssl"><br><br>

    <button onclick="getEmails()">Get Emails</button><br><br>

    <table border="1">
        <thead>
            <tr>
                <th>Title</th>
                <th>Content</th>
                <th>Time</th>
            </tr>
        </thead>
        <tbody id="emailTable">
            <!-- 这里将显示获取的邮件 -->
        </tbody>
    </table>
</body>
</html>
